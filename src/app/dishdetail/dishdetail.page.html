<ion-header>
  <ion-toolbar color='tertiary'>
    <ion-buttons color='tertiary'>
      <ion-back-button color="light" slot="start"></ion-back-button>
      <ion-title>Dish Details</ion-title>
    </ion-buttons>
    <ion-icon name='more' slot="end" (click)='openActionSheet()' 
    style="font-size: xx-large; 
    cursor:pointer" ></ion-icon>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-fab *ngIf='isFav' vertical="bottom" horizontal="end">
    <ion-fab-button (click)="unfavDish()" id="unFavItem" color='tertiary'>
      <ion-icon name="heart"></ion-icon>
    </ion-fab-button>
  </ion-fab>
  <ion-fab *ngIf='!isFav' vertical="bottom" horizontal="end">
    <ion-fab-button (click)="favDish()" id="favItem" color='tertiary'>
      <ion-icon name="heart-empty"></ion-icon>
    </ion-fab-button>
  </ion-fab>

  <ion-refresher slot="fixed" (ionRefresh)='doRefresh($event)' id="refresher">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <!-- <ion-card id="dish-summary" *ngIf='dish'>
    <img src="{{BaseURL + dish.image}}" />
    <ion-card-content>
      <ion-card-title>
        {{dish.name}}
      </ion-card-title>
      <p>
        {{dish.description}}
      </p>
    </ion-card-content>
    <ion-row>
      <ion-col>
        <button ion-button icon-left clear small>
          <ion-icon name='star'></ion-icon>
          <div> {{avgStars}} ratings</div>
        </button>
      </ion-col>
      <ion-col>
        <button ion-button icon-left clear small>
          <ion-icon name='text'></ion-icon>
          <div> {{numCmts}} comments</div>
        </button>
      </ion-col>
    </ion-row>
  </ion-card> -->

  <!-- <div [hidden]='dish || errMsg'>
    <ion-spinner></ion-spinner>
    <h2>
      Loading... please wait
    </h2>
  </div>
  <div *ngIf='errMsg'>
    <h2>
      Error:
    </h2>
    <h4>
      {{errMsg}}
    </h4>
  </div> -->
  <!-- <ion-list *ngIf='dish'>
    <ion-list-header>
      Comments
    </ion-list-header>
    <ion-item *ngFor = 'let comment of dish.comments' class="ion-text-wrap">
      <h4>{{comment.comment}}</h4>
      <p>{{comment.rating}} stars </p>
      <p>
        <span>
          -- {{comment.author}} {{comment.date | date}} 
        </span>
      </p>
    </ion-item>
  </ion-list> -->

  <!-- <ion-card *ngIf='dish'>
    <ion-card-header color='tertiary'>
      <h4 class="BoldTxt" style="color: white;">
        Comments
      </h4>
    </ion-card-header>
    <ion-card-content *ngFor='let comment of dish.comments' class="shadow-depth-8">
      <ion-row class="DispFlex pb-10">
        <ion-col>
          <sup>{{comment.date | date}}</sup>
        </ion-col>
        <ion-col style="text-align: end; color: #000000; font-weight: 1000;">
          {{comment.rating}} {{comment.ratingUnit}}
        </ion-col>
      </ion-row>
      <ion-row class="pb-10">
        {{comment.comment}}
      </ion-row>
      <ion-row class="pb-10" class="ion-justify-content-end">
        -- {{comment.author}}
      </ion-row>
    </ion-card-content>
  </ion-card> -->

  <ion-grid>
    <ion-row>      
      <ion-col>
        <ion-card id="dish-summary" *ngIf='dish'>
          <img src="{{BaseURL + dish.image}}" />
          <ion-card-content>
            <ion-card-title>
              {{dish.name}}
            </ion-card-title>
            <p>
              {{dish.description}}
            </p>
          </ion-card-content>
          <ion-row>
            <ion-col size='12'>
              <ion-buttons ion-button icon-left clear small>
                <ion-icon name='star' color='tertiary'></ion-icon>
                <div style="padding-left: 5px;" class="ContactTxt"> {{avgStars}} ratings</div>
              </ion-buttons>
            </ion-col>
            <ion-col size='12'>
              <ion-buttons ion-button icon-left clear small>
                <ion-icon name='text' color='tertiary'></ion-icon>
                <div style="padding-left: 5px; " class="ContactTxt"> {{numCmts}} comments</div>
              </ion-buttons>
            </ion-col>
          </ion-row>
        </ion-card> 
      </ion-col>

      <ion-col>
        <ion-card *ngIf='dish'>
          <ion-card-header color='tertiary' class="pad_5">
            <h4 class="BoldTxt mb_5 mt_5" style="color: white;   ">
              Comments
            </h4>
          </ion-card-header>
          <ion-card-content *ngFor='let comment of dish.comments' class="shadow-depth-8">
            <ion-row class="DispFlex pb-10">
              <ion-col>
                <sup>{{comment.date | date}}</sup>
              </ion-col>
              <ion-col style="text-align: end; 
              color: #000000; 
              font-weight: 1000;">
                {{comment.rating}} {{comment.ratingUnit}}
              </ion-col>
            </ion-row>
            <ion-row class="pb-10">
              {{comment.comment}}
            </ion-row>
            <ion-row class="pb-10" class="ion-justify-content-end">
              -- {{comment.author}}
            </ion-row>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>

  <div [hidden]='dish || errMsg'>
    <ion-spinner></ion-spinner>
    <h2>
      Loading... please wait
    </h2>
  </div>

  <div *ngIf='errMsg'>
    <h2>
      Error:
    </h2>
    <h4>
      {{errMsg}}
    </h4>
  </div>

</ion-content>